import * as express from "express"
import * as needle from "needle"
import { HttpRequest } from "../models/http-request";

export class Controller {
    path: string;
    router: express.Router;
    
    constructor(path: string) {
        this.path = path;
        this.router = express.Router();
    }

    async get(req: HttpRequest, res: express.Response, next: express.NextFunction) {
        needle.get(req.url(), (error, response, body) => {
            if(error) {
                next(error)
            }
            try {
                const status = response.statusCode || 500;
                res.status(status).json(body)
            } catch(error) {
                next(error)
            }
        })
    }
}