import * as express from "express"
import {  middleware } from "apicache"
import { RSRequest, RSRequestParams } from "../models/rs-request";
import { Controller } from "./controller";

export class RecipeController extends Controller {

    constructor() {
        super("/recipe-safe")
        this.router.get(this.path, middleware('2 minutes'), this.getTest);
    }

    async getTest(req: express.Request, res: express.Response, next: express.NextFunction) {
        try {
            const request = new RSRequest(new RSRequestParams(req.query["search"] as string))
            await super.get(request, res, next)
        } catch(error) {
            console.log(error)
            next(error);
        }
    }
}