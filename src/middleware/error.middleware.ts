import { HttpError } from "../models/http-error";
import { NextFunction, Request, Response } from "express";
import { APP_ERROR_MESSAGE } from "../constants/constants";

function errorMiddleware(error: HttpError, request: Request, response: Response, next: NextFunction) {
  try {
    const status = error.status ? error.status : 500;
    response.status(status).send(error.toJSON());
  } catch(error) {
    const anyError = error as {} || undefined
    response.status(500).send(new HttpError(500, "INTERNAL ERROR", APP_ERROR_MESSAGE.serverError, anyError).toJSON())
  }
}
  
export default errorMiddleware;